/* 
 * Copyright 2005-2008 Samuel Mello & Eduardo Schnell
 *
 *   This program is free software; you can redistribute it and/or modify
 *   it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation; version 2 of the License.
 * 
 *   This program is distributed in the hope that it will be useful,
 *   but WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *   GNU General Public License for more details.
 * 
 */

/*
 * DatashowPanel.java
 *
 * Created on 26 de Dezembro de 2005, 23:03
 */

package datasoul.datashow;

import datasoul.*;
import datasoul.config.BackgroundConfig;
import datasoul.config.ConfigObj;
import datasoul.render.ContentManager;
import datasoul.render.SwingPanelContentRender;
import datasoul.util.*;
import datasoul.datashow.*;
import datasoul.song.*;
import datasoul.util.ObjectManager;
import java.awt.Dimension;

/**
 *
 * @author  Administrador
 */
public class DatashowPanel extends javax.swing.JPanel {
    
    /**
     * Creates new form DatashowPanel
     */
    public DatashowPanel() {
        initComponents();
        
        ObjectManager.getInstance().setAuxiliarPanel(auxiliar);
        ObjectManager.getInstance().setServiceListPanel(serviceList);
        ObjectManager.getInstance().setPreviewPanel(preview);
        ObjectManager.getInstance().setLivePanel(live);
        
        
        java.util.ResourceBundle intl = java.util.ResourceBundle.getBundle("datasoul/internationalize");

        cbPreviewSize.setModel(new javax.swing.DefaultComboBoxModel(new String[] { 
            intl.getString("Dont_show"), 
            intl.getString("Small"), 
            intl.getString("Medium"), 
            intl.getString("Large") }));        
                
        cbLiveSize.setModel(new javax.swing.DefaultComboBoxModel(new String[] { 
            intl.getString("Dont_show"), 
            intl.getString("Small"), 
            intl.getString("Medium"), 
            intl.getString("Large") }));        
            
        initPreview();
        initLive();
    }

    private void initPreview(){
        int width, height;
        try{
            width = Integer.parseInt(ConfigObj.getInstance().getMonitorOutputSizeWidth());
        }catch(Exception e){
            width = 640;
        }
        try{
            height = Integer.parseInt(ConfigObj.getInstance().getMonitorOutputSizeHeight());
        }catch(Exception e){
            height = 480;
        }
        
        SwingPanelContentRender contentRender = new SwingPanelContentRender(previewDisplayPanel1);
        contentRender.initDisplay( width, height, 0, 0, false );
        
        ContentManager.getInstance().registerPreviewPanel( contentRender );
        
    }
    
    private void initLive(){
        int width, height;
        try{
            width = Integer.parseInt(ConfigObj.getInstance().getMainOutputSizeWidth());
        }catch(Exception e){
            width = 640;
        }
        try{
            height = Integer.parseInt(ConfigObj.getInstance().getMainOutputSizeHeight());
        }catch(Exception e){
            height = 480;
        }
        
        SwingPanelContentRender contentRender = new SwingPanelContentRender(liveDisplayPanel);
        contentRender.initDisplay( width, height, 0, 0, false );
        
        ContentManager.getInstance().registerMainLiveRender( contentRender );
        contentRender.paintBackground(BackgroundConfig.getInstance().getMainBackgroundImg());

    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jSplitPane2 = new javax.swing.JSplitPane();
        split3 = new javax.swing.JSplitPane();
        pnlPreview = new javax.swing.JPanel();
        pnlPreviewBox = new javax.swing.JPanel();
        previewDisplayPanel1 = new datasoul.render.SwingDisplayPanel();
        cbPreviewSize = new javax.swing.JComboBox();
        jLabel10 = new javax.swing.JLabel();
        preview = new datasoul.datashow.PreviewPanel();
        pnlLive = new javax.swing.JPanel();
        live = new datasoul.datashow.LivePanel();
        pnlLiveBox = new javax.swing.JPanel();
        cbLiveSize = new javax.swing.JComboBox();
        jLabel11 = new javax.swing.JLabel();
        liveDisplayPanel = new datasoul.render.SwingDisplayPanel();
        jSplitPane1 = new javax.swing.JSplitPane();
        serviceList = new datasoul.datashow.ServiceListPanel();
        auxiliar = new datasoul.datashow.AuxiliarPanel();

        addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentResized(java.awt.event.ComponentEvent evt) {
                formComponentResized(evt);
            }
        });

        jSplitPane2.setDividerLocation(320);

        split3.setDividerLocation(300);

        previewDisplayPanel1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        previewDisplayPanel1.setPreferredSize(new java.awt.Dimension(160, 120));
        previewDisplayPanel1.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentResized(java.awt.event.ComponentEvent evt) {
                previewDisplayPanel1previewDisplayResized(evt);
            }
        });

        org.jdesktop.layout.GroupLayout previewDisplayPanel1Layout = new org.jdesktop.layout.GroupLayout(previewDisplayPanel1);
        previewDisplayPanel1.setLayout(previewDisplayPanel1Layout);
        previewDisplayPanel1Layout.setHorizontalGroup(
            previewDisplayPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 156, Short.MAX_VALUE)
        );
        previewDisplayPanel1Layout.setVerticalGroup(
            previewDisplayPanel1Layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 116, Short.MAX_VALUE)
        );

        cbPreviewSize.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Don't show", "Small", "Medium", "Large" }));
        cbPreviewSize.setSelectedIndex(1);
        cbPreviewSize.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbPreviewSizeActionPerformed(evt);
            }
        });

        java.util.ResourceBundle bundle = java.util.ResourceBundle.getBundle("datasoul/internationalize"); // NOI18N
        jLabel10.setText(bundle.getString("Preview_Size")); // NOI18N

        org.jdesktop.layout.GroupLayout pnlPreviewBoxLayout = new org.jdesktop.layout.GroupLayout(pnlPreviewBox);
        pnlPreviewBox.setLayout(pnlPreviewBoxLayout);
        pnlPreviewBoxLayout.setHorizontalGroup(
            pnlPreviewBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(pnlPreviewBoxLayout.createSequentialGroup()
                .addContainerGap()
                .add(pnlPreviewBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(pnlPreviewBoxLayout.createSequentialGroup()
                        .add(jLabel10)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(cbPreviewSize, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(previewDisplayPanel1, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(87, Short.MAX_VALUE))
        );
        pnlPreviewBoxLayout.setVerticalGroup(
            pnlPreviewBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(pnlPreviewBoxLayout.createSequentialGroup()
                .addContainerGap()
                .add(pnlPreviewBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                    .add(jLabel10)
                    .add(cbPreviewSize, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(previewDisplayPanel1, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        preview.setMinimumSize(new java.awt.Dimension(10, 10));

        org.jdesktop.layout.GroupLayout pnlPreviewLayout = new org.jdesktop.layout.GroupLayout(pnlPreview);
        pnlPreview.setLayout(pnlPreviewLayout);
        pnlPreviewLayout.setHorizontalGroup(
            pnlPreviewLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(pnlPreviewBox, 0, 297, Short.MAX_VALUE)
            .add(preview, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 297, Short.MAX_VALUE)
        );
        pnlPreviewLayout.setVerticalGroup(
            pnlPreviewLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, pnlPreviewLayout.createSequentialGroup()
                .add(preview, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 314, Short.MAX_VALUE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(pnlPreviewBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
        );

        split3.setTopComponent(pnlPreview);

        cbLiveSize.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Don't show", "Small", "Medium", "Large" }));
        cbLiveSize.setSelectedIndex(1);
        cbLiveSize.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cbLiveSizeActionPerformed(evt);
            }
        });

        jLabel11.setText(bundle.getString("Preview_Size")); // NOI18N

        liveDisplayPanel.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        liveDisplayPanel.setPreferredSize(new java.awt.Dimension(160, 120));
        liveDisplayPanel.addComponentListener(new java.awt.event.ComponentAdapter() {
            public void componentResized(java.awt.event.ComponentEvent evt) {
                liveDisplayPanelpreviewDisplayResized(evt);
            }
        });

        org.jdesktop.layout.GroupLayout liveDisplayPanelLayout = new org.jdesktop.layout.GroupLayout(liveDisplayPanel);
        liveDisplayPanel.setLayout(liveDisplayPanelLayout);
        liveDisplayPanelLayout.setHorizontalGroup(
            liveDisplayPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 156, Short.MAX_VALUE)
        );
        liveDisplayPanelLayout.setVerticalGroup(
            liveDisplayPanelLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 116, Short.MAX_VALUE)
        );

        org.jdesktop.layout.GroupLayout pnlLiveBoxLayout = new org.jdesktop.layout.GroupLayout(pnlLiveBox);
        pnlLiveBox.setLayout(pnlLiveBoxLayout);
        pnlLiveBoxLayout.setHorizontalGroup(
            pnlLiveBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 357, Short.MAX_VALUE)
            .add(pnlLiveBoxLayout.createSequentialGroup()
                .addContainerGap()
                .add(pnlLiveBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING, false)
                    .add(pnlLiveBoxLayout.createSequentialGroup()
                        .add(jLabel11)
                        .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                        .add(cbLiveSize, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                    .add(liveDisplayPanel, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(147, Short.MAX_VALUE))
        );
        pnlLiveBoxLayout.setVerticalGroup(
            pnlLiveBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(0, 177, Short.MAX_VALUE)
            .add(pnlLiveBoxLayout.createSequentialGroup()
                .addContainerGap()
                .add(pnlLiveBoxLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.BASELINE)
                    .add(jLabel11)
                    .add(cbLiveSize, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(liveDisplayPanel, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );

        org.jdesktop.layout.GroupLayout pnlLiveLayout = new org.jdesktop.layout.GroupLayout(pnlLive);
        pnlLive.setLayout(pnlLiveLayout);
        pnlLiveLayout.setHorizontalGroup(
            pnlLiveLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(pnlLiveLayout.createSequentialGroup()
                .addContainerGap()
                .add(pnlLiveLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
                    .add(pnlLiveBox, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .add(live, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 357, Short.MAX_VALUE)))
        );
        pnlLiveLayout.setVerticalGroup(
            pnlLiveLayout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(pnlLiveLayout.createSequentialGroup()
                .add(live, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 314, Short.MAX_VALUE)
                .addPreferredGap(org.jdesktop.layout.LayoutStyle.RELATED)
                .add(pnlLiveBox, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, org.jdesktop.layout.GroupLayout.PREFERRED_SIZE))
        );

        split3.setRightComponent(pnlLive);

        jSplitPane2.setRightComponent(split3);

        jSplitPane1.setBorder(null);
        jSplitPane1.setDividerLocation(250);
        jSplitPane1.setOrientation(javax.swing.JSplitPane.VERTICAL_SPLIT);
        jSplitPane1.setLeftComponent(serviceList);
        jSplitPane1.setRightComponent(auxiliar);

        jSplitPane2.setLeftComponent(jSplitPane1);

        org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(org.jdesktop.layout.GroupLayout.TRAILING, jSplitPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 998, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
            .add(jSplitPane2, org.jdesktop.layout.GroupLayout.DEFAULT_SIZE, 497, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    private void formComponentResized(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_formComponentResized
    }//GEN-LAST:event_formComponentResized

    private void cbPreviewSizeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbPreviewSizeActionPerformed
    
        Dimension d;
        
        switch (cbPreviewSize.getSelectedIndex()){
            
            case 0:
                previewDisplayPanel1.setVisible(false);
                break;
                
            case 1:
                previewDisplayPanel1.setVisible(true);
                d = new Dimension(160, 120);
                previewDisplayPanel1.setSize(d);
                previewDisplayPanel1.setPreferredSize(d);
                previewDisplayPanel1.setMinimumSize(d);
                previewDisplayPanel1.setMaximumSize(d);
                break;
            
            case 2:
                previewDisplayPanel1.setVisible(true);
                d = new Dimension(320, 240);
                previewDisplayPanel1.setSize(d);
                previewDisplayPanel1.setPreferredSize(d);
                previewDisplayPanel1.setMinimumSize(d);
                previewDisplayPanel1.setMaximumSize(d);
                break;

            case 3:
                previewDisplayPanel1.setVisible(true);
                d = new Dimension(480, 360);
                previewDisplayPanel1.setSize(d);
                previewDisplayPanel1.setPreferredSize(d);
                previewDisplayPanel1.setMinimumSize(d);
                previewDisplayPanel1.setMaximumSize(d);
                break;
            
        }
        
        previewDisplayPanel1.revalidate();
        pnlPreviewBox.revalidate();
        pnlPreview.revalidate();
        
        
    }//GEN-LAST:event_cbPreviewSizeActionPerformed

    private void previewDisplayPanel1previewDisplayResized(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_previewDisplayPanel1previewDisplayResized
        
        Dimension dim= previewDisplayPanel1.getSize();
        int height = dim.height;
        int width = (dim.height/3)*4 ;
        dim.setSize(width,height);
        previewDisplayPanel1.setSize(dim);
        
    }//GEN-LAST:event_previewDisplayPanel1previewDisplayResized

    private void cbLiveSizeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cbLiveSizeActionPerformed

        Dimension d;
        
        switch (cbLiveSize.getSelectedIndex()){
            
            case 0:
                liveDisplayPanel.setVisible(false);
                break;
                
            case 1:
                liveDisplayPanel.setVisible(true);
                d = new Dimension(160, 120);
                liveDisplayPanel.setSize(d);
                liveDisplayPanel.setPreferredSize(d);
                liveDisplayPanel.setMinimumSize(d);
                liveDisplayPanel.setMaximumSize(d);
                break;
            
            case 2:
                liveDisplayPanel.setVisible(true);
                d = new Dimension(320, 240);
                liveDisplayPanel.setSize(d);
                liveDisplayPanel.setPreferredSize(d);
                liveDisplayPanel.setMinimumSize(d);
                liveDisplayPanel.setMaximumSize(d);
                break;

            case 3:
                liveDisplayPanel.setVisible(true);
                d = new Dimension(480, 360);
                liveDisplayPanel.setSize(d);
                liveDisplayPanel.setPreferredSize(d);
                liveDisplayPanel.setMinimumSize(d);
                liveDisplayPanel.setMaximumSize(d);
                break;
            
        }
        
        liveDisplayPanel.revalidate();
        pnlLiveBox.revalidate();
        pnlLive.revalidate();
        
        
}//GEN-LAST:event_cbLiveSizeActionPerformed

    private void liveDisplayPanelpreviewDisplayResized(java.awt.event.ComponentEvent evt) {//GEN-FIRST:event_liveDisplayPanelpreviewDisplayResized
        
        Dimension dim= liveDisplayPanel.getSize();
        int height = dim.height;
        int width = (dim.height/3)*4 ;
        dim.setSize(width,height);
        liveDisplayPanel.setSize(dim);

}//GEN-LAST:event_liveDisplayPanelpreviewDisplayResized
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private datasoul.datashow.AuxiliarPanel auxiliar;
    private javax.swing.JComboBox cbLiveSize;
    private javax.swing.JComboBox cbPreviewSize;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JSplitPane jSplitPane1;
    private javax.swing.JSplitPane jSplitPane2;
    private datasoul.datashow.LivePanel live;
    private datasoul.render.SwingDisplayPanel liveDisplayPanel;
    private javax.swing.JPanel pnlLive;
    private javax.swing.JPanel pnlLiveBox;
    private javax.swing.JPanel pnlPreview;
    private javax.swing.JPanel pnlPreviewBox;
    private datasoul.datashow.PreviewPanel preview;
    private datasoul.render.SwingDisplayPanel previewDisplayPanel1;
    private datasoul.datashow.ServiceListPanel serviceList;
    private javax.swing.JSplitPane split3;
    // End of variables declaration//GEN-END:variables
    
}
